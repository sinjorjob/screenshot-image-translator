# 画像翻訳ツール ユーザー利用手順書

## 📋 概要

この画像翻訳ツールは、クリップボードにコピーされた画像内のテキストを16言語間で自由に翻訳できるWindowsアプリケーションです。デフォルトは日本語→英語翻訳ですが、タガログ語を含む多言語に対応しています。

## 🎯 主な機能

- **自動翻訳**: 画像をクリップボードにコピーするだけで自動翻訳開始
- **16言語対応**: FROM/TO言語をシステムトレイメニューで簡単切り替え（タガログ語含む）
- **大画面表示**: 翻訳結果を大きな画面で確認
- **ズーム機能**: Ctrl+マウスホイールで拡大縮小（0.1倍～5倍）
- **自動保存**: 翻訳結果をimagesフォルダに自動保存
- **テスト機能**: 翻訳処理なしで画像表示をテスト可能

---

## 🛠️ 初回セットアップ

### ステップ1: 必要な環境確認
- **OS**: Windows 10/11
- **Python**: 3.12以上
- **OpenAI APIキー**: 事前に取得済みであること
- **⚠️ 重要**: OpenAI組織のID確認（Verified Organization）が完了していること

### ステップ2: OpenAI組織のID確認（重要）

**gpt-image-1 APIを使用するには、組織のID確認が必須です。**

#### A. ID確認状況の確認方法
1. **OpenAI Platform**にアクセス: https://platform.openai.com/
2. **ログイン**して、右上のアカウントメニューをクリック
3. **「Organization settings」**を選択
4. **「Verification」**タブを確認

#### B. ID確認が完了している場合
- **ステータス**: "Verified Organization" と表示
- **この場合**: そのまま次のステップに進んでください

#### C. ID確認が未完了の場合
- **ステータス**: "Unverified" または "Pending" と表示
- **必要な手続き**:

##### C-1. 個人ユーザーの場合
1. **「Settings」→「Billing」**に移動
2. **「Payment methods」**でクレジットカードを登録
3. **最低$5の課金**を実行（プリペイド形式）
4. **電話番号認証**を完了
5. **24-48時間後**に自動的に確認完了

##### C-2. 企業ユーザーの場合
1. **「Organization settings」→「Verification」**に移動
2. **「Submit verification request」**をクリック
3. **必要書類をアップロード**:
   - 法人登記簿謄本（英語版）
   - 事業証明書
   - 担当者の身分証明書
4. **審査期間**: 3-7営業日
5. **確認完了後にメール通知**を受信

##### C-3. 確認完了の待機期間中
- **APIアクセス**: gpt-image-1は使用不可
- **代替案**: 通常のGPT-4 Vision API（OCR + テキスト翻訳）の使用を検討
- **このツール**: ID確認完了後に使用開始してください

#### D. 確認完了の最終チェック
1. **Platform画面**で "Verified Organization" を確認
2. **API Keys**ページでgpt-image-1へのアクセス権限を確認
3. **Billing**ページで課金設定が有効であることを確認

**⚠️ 注意**: ID確認が未完了の状態でツールを実行すると、API呼び出しエラーが発生します。

### ステップ3: ファイルのダウンロード
プロジェクトファイルを適当なフォルダに配置してください。

```
C:\ImageTranslator\  (例)
├── README.md              # プロジェクト概要
├── requirements.txt       # Python依存パッケージ
├── .env                   # 環境変数（後で作成）
├── .env.example          # 環境変数テンプレート
├── config/               # 設定ファイル
│   └── config.json      # アプリケーション設定
├── source/              # ソースコード
│   ├── main.py         # メインプログラム
│   └── assets/         # 静的リソース
│       └── icons/      # アプリアイコン
│           ├── ON.png  # 自動翻訳ON時
│           └── OFF.png # 自動翻訳OFF時
├── images/              # 翻訳結果画像（自動生成）
├── logs/                # ログファイル（自動生成）
└── docs/               # ドキュメント
```

### ステップ4: Pythonパッケージのインストール
1. **コマンドプロンプトまたはPowerShellを開く**
2. **プロジェクトフォルダ（ルート）に移動**
   ```cmd
   cd C:\ImageTranslator
   ```
3. **依存パッケージをインストール**
   ```cmd
   pip install -r requirements.txt
   ```

### ステップ5: APIキーの設定
1. **`.env.example`ファイルをコピーして`.env`ファイルを作成**
   ```cmd
   copy .env.example .env
   ```
2. **`.env`ファイルをテキストエディタで開く**
3. **OpenAI APIキーを設定**
   ```
   OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
   ```
   - `sk-`で始まる実際のAPIキーに置き換えてください
   - APIキーはOpenAI Platform（https://platform.openai.com/api-keys）で取得できます

---

## 🚀 アプリケーションの起動と基本使用方法

### 基本的な起動手順
1. **コマンドプロンプトでsourceフォルダに移動**
   ```cmd
   cd source
   ```
2. **メインプログラムを実行**
   ```cmd
   python main.py
   ```
3. **システムトレイにアイコンが表示**されることを確認
   - 初期状態: 🔴（自動翻訳OFF）
   - ONにする: システムトレイアイコンを右クリック → 「🔴 自動翻訳: OFF」をクリック

### 🌍 言語設定の変更

#### 対応言語一覧（16言語）
- **日本語** (Japanese)
- **英語** (English)
- **中国語簡体字** (Simplified Chinese)
- **中国語繁体字** (Traditional Chinese)
- **韓国語** (Korean)
- **タガログ語** (Tagalog) ←フィリピンの公用語
- **スペイン語** (Spanish)
- **フランス語** (French)
- **ドイツ語** (German)
- **ポルトガル語** (Portuguese)
- **イタリア語** (Italian)
- **ロシア語** (Russian)
- **アラビア語** (Arabic)
- **ヒンディー語** (Hindi)
- **タイ語** (Thai)
- **ベトナム語** (Vietnamese)

#### 言語設定の手順
1. **システムトレイアイコンを右クリック**
2. **「📝 翻訳設定」**をクリック
3. **翻訳元言語 (From)**を選択
   - 画像内のテキストの言語を選択
   - 例: 日本語の画像なら「日本語」を選択
4. **翻訳先言語 (To)**を選択
   - 翻訳したい言語を選択
   - 例: タガログ語に翻訳したい場合は「タガログ語」を選択
5. **現在の設定**がメニューに表示されます
   - 例: 「現在: 日本語 → タガログ語」

#### 使用例
- **日本語のゲーム画面 → タガログ語**: FROM=日本語、TO=タガログ語
- **英語の資料 → 日本語**: FROM=英語、TO=日本語
- **中国語の文書 → 英語**: FROM=中国語簡体字、TO=英語

---

## 📸 翻訳実行方法

### 基本的な翻訳手順
1. **自動翻訳をONにする**
   - システムトレイアイコンを右クリック
   - 「🔴 自動翻訳: OFF」→「🟢 自動翻訳: ON」に変更
   - アイコンが緑色に変わることを確認

2. **画像をキャプチャ**
   - **Win + Shift + S** キーを押す（Windowsの標準スクリーンショット機能）
   - マウスで翻訳したいテキスト部分を範囲選択
   - 選択が完了すると自動的にクリップボードにコピーされます

3. **自動翻訳処理**
   - 画像がクリップボードにコピーされると自動的に翻訳処理が開始されます
   - 進捗は通知で確認できます：
     - 「○○語から○○語への翻訳を開始...」
     - 「AIに翻訳を依頼中... (最大120秒)」

4. **結果確認**
   - 翻訳が完了すると結果画像が大画面で自動表示されます
   - Ctrl+マウスホイールで拡大縮小可能（0.1倍～5倍）
   - 「閉じる」ボタンで結果ウィンドウを閉じます

5. **自動保存**
   - 翻訳結果はimagesフォルダに自動保存されます
   - ファイル名: `translated_YYYYMMDD_HHMMSS_fff.png`

### 進捗メッセージの説明

#### 正常時の進捗
1. **「日本語からタガログ語への翻訳を開始...」**
   - 翻訳処理が開始されました
   - 設定された言語ペアで処理中です

2. **「AIに翻訳を依頼中... (最大120秒)」**
   - OpenAI APIに翻訳を依頼しています
   - 通常は10-30秒程度で完了します

3. **「翻訳が完了しました！」**
   - 翻訳が成功し、結果が表示されます
   - 保存先パスも通知されます

#### エラー時の対処
- **「翻訳に失敗しました」**: APIキーまたはネットワーク接続を確認
- **「APIエラー」**: ID確認状況やAPIキーの有効性を確認
- **「タイムアウト」**: ネットワーク接続またはAPI応答時間の問題

---

## 🔧 詳細機能

### ズーム機能
- **拡大**: Ctrl + マウスホイール上
- **縮小**: Ctrl + マウスホイール下
- **範囲**: 0.1倍（10%）～ 5倍（500%）
- **リアルタイム表示**: 現在の倍率がウィンドウ下部に表示

### テスト表示機能
1. **システムトレイアイコンを右クリック**
2. **「📸 画像表示テスト」**をクリック
3. **画像ファイルを選択**（PNG, JPG, BMP, GIF対応）
4. **翻訳処理なし**で結果ウィンドウの動作をテスト可能

### 自動保存設定
- **保存先**: imagesフォルダ（プロジェクトルート）
- **ファイル形式**: PNG
- **ファイル名**: `translated_YYYYMMDD_HHMMSS_fff.png`
- **無効化**: config.jsonの`auto_save`を`false`に変更

---

## ⚙️ 設定のカスタマイズ

### config.jsonファイルの編集
設定ファイル（`config/config.json`）を編集することで、詳細な動作をカスタマイズできます。

#### 主要な設定項目

```json
{
  "translation_settings": {
    "from_language": "japanese",     // 翻訳元言語
    "to_language": "english"        // 翻訳先言語
  },
  "api_settings": {
    "quality": "medium",             // medium ($0.04/枚) / high ($0.17/枚)
    "input_fidelity": "high",       // 入力画像の精度
    "timeout": 120,                 // API呼び出しタイムアウト（秒）
    "ultra_precision_mode": true    // 超精密モード（自動でhigh品質）
  },
  "ui_settings": {
    "clipboard_check_interval": 500,    // クリップボード監視間隔（ミリ秒）
    "max_display_width": 1400,         // 最大表示幅
    "max_display_height": 1000         // 最大表示高
  }
}
```

#### コスト最適化設定
- **節約モード**: `"quality": "medium"` (翻訳1回あたり約$0.04)
- **高品質モード**: `"quality": "high"` (翻訳1回あたり約$0.17)
- **超精密モード**: `"ultra_precision_mode": true` (自動的に高品質設定)

---

## 🔍 トラブルシューティング

### よくある問題と解決方法

#### 1. アプリが起動しない
**症状**: `python main.py` でエラーが出る

**解決方法**:
```cmd
# Python環境確認
python --version

# パッケージ再インストール
pip install -r requirements.txt --force-reinstall

# Pythonパス確認
where python
```

#### 2. APIキーエラー
**症状**: "OPENAI_API_KEYが設定されていません"

**解決方法**:
1. `.env`ファイルが存在するか確認
2. APIキーが`sk-`で始まっているか確認
3. APIキーに余分なスペースがないか確認

#### 3. ID確認エラー（重要）
**症状**: API呼び出しで403エラーまたは"Forbidden"

**解決方法**:
1. **OpenAI Platform**で組織のID確認状況を再確認
2. **"Verified Organization"**と表示されるまで待機
3. **課金設定**が有効であることを確認

#### 4. 翻訳品質が低い
**症状**: 翻訳結果が不正確またはレイアウトが崩れる

**解決方法**:
1. **config.json**の設定を変更:
   ```json
   {
     "api_settings": {
       "quality": "high",
       "ultra_precision_mode": true
     }
   }
   ```
2. **画像の解像度**を上げる（より鮮明な画像を使用）
3. **テキストがはっきり見える**画像を使用

#### 5. システムトレイにアイコンが表示されない
**症状**: アプリは起動しているが、システムトレイにアイコンが見えない

**解決方法**:
1. **隠れたアイコン**を確認（^ マークをクリック）
2. **Windowsの通知設定**でシステムトレイアイコンが有効になっているか確認
3. **アプリを再起動**

#### 6. 翻訳が自動開始されない
**症状**: 画像をクリップボードにコピーしても翻訳されない

**解決方法**:
1. **自動翻訳がON**になっているか確認（アイコンが緑色）
2. **Win+Shift+S**で正しく画像がコピーされているか確認
3. **別の画像**で試してみる
4. **アプリを再起動**

#### 7. ネットワークエラー
**症状**: "ネットワーク接続エラー"または"タイムアウト"

**解決方法**:
1. **インターネット接続**を確認
2. **ファイアウォール設定**でPythonの通信が許可されているか確認
3. **プロキシ設定**がある場合は設定を確認
4. **タイムアウト時間**を延長：
   ```json
   {
     "api_settings": {
       "timeout": 180
     }
   }
   ```

### ログファイルの確認
問題が解決しない場合は、logsフォルダのログファイルを確認してください。

```
logs/image_translator_YYYYMMDD_HHMMSS.log
```

ログには詳細なエラー情報が記録されています。

---

## 💡 使用シナリオ例

### シナリオ1: 日本のゲーム画面をフィリピン人同僚に説明
**状況**: 日本のゲームのスクリーンショットをフィリピン人同僚に共有したい

**手順**:
1. **言語設定**: FROM=日本語、TO=タガログ語
2. **ゲーム画面をキャプチャ**: Win+Shift+S
3. **翻訳実行**: 自動的にタガログ語版が生成
4. **共有**: 翻訳された画像をメールやチャットで送信

### シナリオ2: 英語資料の日本語理解
**状況**: 英語のマニュアルやドキュメントを日本語で理解したい

**手順**:
1. **言語設定**: FROM=英語、TO=日本語
2. **資料をキャプチャ**: 必要な部分をWin+Shift+Sで選択
3. **翻訳確認**: 日本語版で内容理解
4. **保存**: 翻訳結果は自動保存されるため後で参照可能

### シナリオ3: 多言語サポート業務
**状況**: カスタマーサポートで多言語対応が必要

**手順**:
1. **顧客からの画像**: スクリーンショットやエラー画面
2. **言語設定**: 顧客の言語からサポート言語へ
3. **素早い翻訳**: 内容を即座に理解
4. **対応準備**: 適切なサポートを準備

---

## 📞 サポート情報

### 料金について
- **medium品質**: 1画像あたり約$0.04
- **high品質**: 1画像あたり約$0.17
- **超精密モード**: 自動的にhigh品質（$0.17/画像）
- **課金**: OpenAI APIの従量課金制

### 更新とメンテナンス
- **アップデート**: GitHubリポジトリで最新版を確認
- **バグ報告**: ログファイルと合わせて報告
- **機能要望**: Issueとして提出

### 制限事項
- **API制限**: OpenAI APIの利用制限に準拠
- **画像サイズ**: 大きすぎる画像は自動リサイズ
- **同時処理**: 1画像ずつの処理（並列処理なし）
- **言語認識**: AIによる自動認識（100%正確ではない）

---

**最終更新**: 2025年1月16日  
**バージョン**: 2.0  
**16言語対応版**: タガログ語を含む多言語翻訳対応